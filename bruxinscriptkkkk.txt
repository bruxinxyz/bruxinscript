local Lib = loadstring(game:HttpGet("https://raw.githubusercontent.com/7yhx/kwargs_Ui_Library/main/source.lua"))()

local Players = game:GetService("Players")
local Camera = game:GetService("Workspace").CurrentCamera
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()

local espEnabled = false
local aimbotEnabled = false

local function createNameTag(player)
    local NameTag = Instance.new("BillboardGui")
    NameTag.Name = "NameTag_" .. player.UserId
    NameTag.Size = UDim2.new(0, 100, 0, 20)
    NameTag.AlwaysOnTop = true
    NameTag.Adornee = player.Character:FindFirstChild("Head")

    local TextLabel = Instance.new("TextLabel")
    TextLabel.Size = UDim2.new(1, 0, 1, 0)
    TextLabel.Text = player.Name
    TextLabel.Font = Enum.Font.SourceSansBold
    TextLabel.TextSize = 14
    TextLabel.TextColor3 = Color3.new(1, 1, 1)
    TextLabel.BackgroundTransparency = 1

    TextLabel.Parent = NameTag
    NameTag.Parent = Camera
end

local function toggleESP(State)
    espEnabled = State
    if espEnabled then
        for _, player in pairs(Players:GetPlayers()) do
            createNameTag(player)
        end
    else
        for _, player in pairs(Players:GetPlayers()) do
            local nameTag = Camera:FindFirstChild("NameTag_" .. player.UserId)
            if nameTag then
                nameTag:Destroy()
            end
        end
    end
end

local function getClosestPlayer()
    local closestPlayer = nil
    local shortestDistance = math.huge

    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            local character = player.Character
            if character and character:FindFirstChild("Head") then
                local headPosition = character.Head.Position
                local distance = (headPosition - Camera.CFrame.Position).Magnitude
                if distance < shortestDistance then
                    shortestDistance = distance
                    closestPlayer = player
                end
            end
        end
    end

    return closestPlayer
end

local function toggleAimbot(State)
    aimbotEnabled = State
end

local UI = Lib:Create{
   Theme = "Dark",
   Size = UDim2.new(0, 555, 0, 400)
}

local Main = UI:Tab{
   Name = "Main"
}

local Divider = Main:Divider{
   Name = "Main shit"
}

local QuitDivider = Main:Divider{
   Name = "Quit"
}

-- Seção na UI para ESP Name
local espSection = Main:Divider{
   Name = "ESP Name"
}

local espToggle = espSection:Toggle{
   Name = "Enable ESP Name",
   Callback = toggleESP
}

-- Seção na UI para Aimbot
local aimbotSection = Main:Divider{
   Name = "Aimbot"
}

local aimbotToggle = aimbotSection:Toggle{
   Name = "Enable Aimbot",
   Callback = toggleAimbot
}

-- Seção na UI para Quit
local Quit = QuitDivider:Button{
   Name = "Closes the ui library.",
   Callback = function()
       UI:Quit{
           Message = "Goodbye!",
           Length = 1
       }
   end
}

UserInputService.InputBegan:Connect(function(input, gameProcessedEvent)
    if not gameProcessedEvent and input.UserInputType == Enum.UserInputType.MouseButton2 and aimbotEnabled then
        local targetPlayer = getClosestPlayer()
        if targetPlayer then
            local headPosition = targetPlayer.Character.Head.Position
            local lookVector = (headPosition - Camera.CFrame.Position).Unit
            Camera.CFrame = CFrame.new(Camera.CFrame.Position, Camera.CFrame.Position + lookVector)
        end
    end
end)
